let state={},variableWatchers={},globalVariables={};function createReactiveVariable(t,e,a="session"){let r="local"===a?localStorage:sessionStorage;a=r.getItem("715_"+t),a=null!==a?JSON.parse(a):e,state[t]=a,variableWatchers[t]=[],e={get(){return state[t]},set(e){state[t]=e,r.setItem("715_"+t,JSON.stringify(e)),updateSpecificVariable(t)}};return globalVariables[t]=e}function updateSpecificVariable(a){var e=variableWatchers[a];e&&e.forEach(e=>{var t;"text"===e.type?e.element.textContent=e.template.replace(/\{\{(\w+)\}\}/g,(e,t)=>void 0!==state[t]?state[t]:""):"attribute"===e.type?e.element.setAttribute(e.attributeName,e.template.replace(/\{\{(\w+)\}\}/g,(e,t)=>void 0!==state[t]?state[t]:"")):"style"===e.type?(t=e.template.replace(/\{\{(\w+)\}\}/g,(e,t)=>void 0!==state[t]?state[t]:""),e.element.setAttribute("style",t)):"conditional"===e.type?(t=evaluateCondition(e.condition),e.element.style.display=t?"":"none"):"form"===e.type&&updateFormElement(e.element,a)})}function updateFormElement(e,t){t=state[t];"INPUT"===e.tagName?"checkbox"===e.type?e.checked=t:("range"!==e.type&&e.type,e.value=t):"SELECT"===e.tagName&&(e.value=t)}function evaluateCondition(e){let a=e;Object.keys(state).forEach(e=>{var t=state[e],e=new RegExp(`\\b${e}\\b`,"g");a=a.replace(e,"string"==typeof t?`"${t}"`:t)});try{return Function(`"use strict"; return (${a})`)()}catch{return!1}}function addWatcher(e,t){variableWatchers[e]||(variableWatchers[e]=[]),variableWatchers[e].some(e=>e.element===t.element&&e.type===t.type&&e.attributeName===t.attributeName)||variableWatchers[e].push(t)}function scanForTemplates(a){if(a.nodeType===Node.TEXT_NODE){let t=a.textContent;var e=t.match(/\{\{(\w+)\}\}/g);e&&e.forEach(e=>{addWatcher(e.slice(2,-2),{type:"text",element:a,template:t})})}else if(a.nodeType===Node.ELEMENT_NODE){if(a.hasAttribute("data-715-if")){let t=a.getAttribute("data-715-if");(t.match(/\b[a-zA-Z_][a-zA-Z0-9_]*\b/g)||[]).forEach(e=>{state.hasOwnProperty(e)&&addWatcher(e,{type:"conditional",element:a,condition:t})})}if(a.hasAttribute("data-715-style")){let t=a.getAttribute("data-715-style");e=t.match(/\{\{(\w+)\}\}/g);e&&e.forEach(e=>{addWatcher(e.slice(2,-2),{type:"style",element:a,template:t})})}Array.from(a.attributes).forEach(t=>{var e;"data-715-style"!==t.name&&(e=t.value.match(/\{\{(\w+)\}\}/g))&&e.forEach(e=>{addWatcher(e.slice(2,-2),{type:"attribute",element:a,attributeName:t.name,template:t.value})})}),setupAutomaticEventHandlers(a),["INPUT","TEXTAREA","SELECT"].includes(a.tagName)||Array.from(a.childNodes).forEach(e=>scanForTemplates(e))}}function setupAutomaticEventHandlers(e){var t=e.getAttribute("data-715-var");if(t&&globalVariables[t]){let a=globalVariables[t];if("INPUT"===e.tagName)addWatcher(t,{type:"form",element:e}),"checkbox"===e.type?(e.checked=a.get(),e.onclick=()=>a.set(e.checked)):"range"===e.type||"number"===e.type?(e.value=a.get(),e.oninput=()=>a.set(parseInt(e.value))):(e.value=a.get(),e.oninput=()=>a.set(e.value));else if("SELECT"===e.tagName)addWatcher(t,{type:"form",element:e}),e.value=a.get(),e.onchange=()=>a.set(e.value);else if("BUTTON"===e.tagName){let t=e.getAttribute("data-715-action");t&&(e.onclick=()=>{var e=a.get();"increment"===t?a.set(e+1):"decrement"===t?a.set(e-1):"reset"===t?a.set(0):"toggle"===t?a.set(!e):t.startsWith("set:")&&(e=t.substring(4),e=isNaN(e)?e:parseInt(e),a.set(e))})}}}function startFramework(){scanForTemplates(document.body),Object.keys(variableWatchers).forEach(e=>{updateSpecificVariable(e)})}window.sevenFifteen={variable:createReactiveVariable,init:startFramework};